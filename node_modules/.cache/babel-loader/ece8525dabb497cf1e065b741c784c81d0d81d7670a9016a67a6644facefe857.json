{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OZON\\\\PycharmProjects\\\\BookStore\\\\src\\\\components\\\\app\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from '../header/Header';\nimport Slider from '../slider/Slider';\nimport Filter from '../filter/Filter';\nimport Cards from '../cards/Cards';\nimport ApiService from \"../serviсes/ApiServices\";\nimport imgBannerFirst from '../../assets/img/banner.png';\nimport imgBannerSecond from '../../assets/img/banner2.png';\nimport imgBannerThird from '../../assets/img/banner3.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.slides = [{\n      url: `${imgBannerFirst}`\n    }, {\n      url: `${imgBannerSecond}`\n    }, {\n      url: `${imgBannerThird}`\n    }];\n    this.apiService = new ApiService();\n    // callback для изменения state в родительском компоненте и дальнейшей передачи этого state в другие компоненты\n    this.handleCategoryClick = async (category, activeCategory) => {\n      const books = await this.apiService.getSelectedBooks(category, this.state.lazyLoadingCount, activeCategory);\n      this.setState(prevState => ({\n        selectedCategory: category,\n        bookList: books,\n        activeCategory: category,\n        lazyLoadingCount: prevState.lazyLoadingCount = 1\n      }));\n    };\n    // callback для изменения state в родительском компоненте и дальнейшей передачи этого state в другие компоненты\n    this.PaginationClick = async () => {\n      const books = await this.apiService.getPagination(this.state.activeCategory, this.state.lazyLoadingCount);\n      this.setState(prevState => ({\n        lazyLoadingCount: prevState.lazyLoadingCount + 1,\n        bookList: books\n      }));\n    };\n    // callback для получения и добавлении книги в список который будет храниться в localstorage + изменения счетчика корзины\n    this.addedToCart = book => {\n      let updatedItemsAddedToCart = [...this.state.itemsAddedToCart];\n\n      // Проверяем, есть ли уже такой товар в корзине\n      const index = updatedItemsAddedToCart.findIndex(item => item.id === book.id);\n      if (index !== -1) {\n        // Если товар уже есть в корзине, удаляем его\n        updatedItemsAddedToCart.splice(index, 1);\n      } else {\n        // Иначе добавляем товар в корзину\n        updatedItemsAddedToCart = [...updatedItemsAddedToCart, book];\n      }\n      this.setState({\n        addedToCart: updatedItemsAddedToCart.length,\n        itemsAddedToCart: updatedItemsAddedToCart\n      }, () => {\n        localStorage.setItem('itemsAddedToCart', JSON.stringify(updatedItemsAddedToCart));\n      });\n    };\n    this.state = {\n      selectedCategory: null,\n      activeCategory: null,\n      bookList: [],\n      addedToCart: 0,\n      itemsAddedToCart: [],\n      lazyLoadingCount: 1\n    };\n  }\n  // получаю из locastorage книги которые добавил в корзину и загружаю их в список при каждом монтировании компонента\n  componentDidMount() {\n    const itemsAddedToCart = JSON.parse(localStorage.getItem('itemsAddedToCart')) || [];\n    this.setState({\n      itemsAddedToCart: itemsAddedToCart,\n      addedToCart: itemsAddedToCart.length\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        className: \"nav\",\n        addedToCart: this.state.addedToCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        slides: this.slides\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Shop\",\n        children: [/*#__PURE__*/_jsxDEV(Filter, {\n          onCategoryClick: this.handleCategoryClick,\n          activeCategory: this.state.activeCategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Cards, {\n          bookList: this.state.bookList,\n          onCardClick: this.addedToCart,\n          onPaginationClick: this.PaginationClick,\n          activeCategory: this.state.activeCategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","Header","Slider","Filter","Cards","ApiService","imgBannerFirst","imgBannerSecond","imgBannerThird","jsxDEV","_jsxDEV","App","constructor","props","slides","url","apiService","handleCategoryClick","category","activeCategory","books","getSelectedBooks","state","lazyLoadingCount","setState","prevState","selectedCategory","bookList","PaginationClick","getPagination","addedToCart","book","updatedItemsAddedToCart","itemsAddedToCart","index","findIndex","item","id","splice","length","localStorage","setItem","JSON","stringify","componentDidMount","parse","getItem","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onCategoryClick","onCardClick","onPaginationClick"],"sources":["C:/Users/OZON/PycharmProjects/BookStore/src/components/app/App.js"],"sourcesContent":["import React, {Component} from 'react';\r\nimport './App.css';\r\nimport Header from '../header/Header';\r\nimport Slider from '../slider/Slider';\r\nimport Filter from '../filter/Filter';\r\nimport Cards from '../cards/Cards';\r\nimport ApiService from \"../serviсes/ApiServices\";\r\n\r\nimport imgBannerFirst from '../../assets/img/banner.png';\r\nimport imgBannerSecond from '../../assets/img/banner2.png';\r\nimport imgBannerThird from '../../assets/img/banner3.png';\r\n\r\n\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selectedCategory: null,\r\n      activeCategory: null,\r\n      bookList: [],\r\n      addedToCart: 0,\r\n      itemsAddedToCart: [],\r\n      lazyLoadingCount: 1,\r\n    }\r\n  }\r\n\r\n  slides = [\r\n    {url: `${imgBannerFirst}`},\r\n    {url: `${imgBannerSecond}`},\r\n    {url: `${imgBannerThird}`},\r\n  ]\r\n\r\n  apiService = new ApiService();\r\n\r\n  // callback для изменения state в родительском компоненте и дальнейшей передачи этого state в другие компоненты\r\n  handleCategoryClick = async (category, activeCategory ) => {\r\n    const books = await this.apiService.getSelectedBooks(category, this.state.lazyLoadingCount, activeCategory );\r\n    this.setState((prevState) => ({\r\n      selectedCategory: category,\r\n      bookList: books,\r\n      activeCategory: category,\r\n      lazyLoadingCount: prevState.lazyLoadingCount = 1,\r\n    }));\r\n  }\r\n\r\n  // callback для изменения state в родительском компоненте и дальнейшей передачи этого state в другие компоненты\r\n  PaginationClick = async () => {\r\n    const books = await this.apiService.getPagination(this.state.activeCategory, this.state.lazyLoadingCount);\r\n    this.setState((prevState) => ({\r\n      lazyLoadingCount: prevState.lazyLoadingCount + 1,\r\n      bookList: books,\r\n    }));\r\n  }\r\n\r\n  // callback для получения и добавлении книги в список который будет храниться в localstorage + изменения счетчика корзины\r\n  addedToCart = (book) => {\r\n    let updatedItemsAddedToCart = [...this.state.itemsAddedToCart];\r\n\r\n    // Проверяем, есть ли уже такой товар в корзине\r\n    const index = updatedItemsAddedToCart.findIndex(item => item.id === book.id);\r\n    if (index !== -1) {\r\n      // Если товар уже есть в корзине, удаляем его\r\n      updatedItemsAddedToCart.splice(index, 1);\r\n    } else {\r\n      // Иначе добавляем товар в корзину\r\n      updatedItemsAddedToCart = [...updatedItemsAddedToCart, book];\r\n    }\r\n\r\n    this.setState({\r\n      addedToCart: updatedItemsAddedToCart.length,\r\n      itemsAddedToCart: updatedItemsAddedToCart,\r\n    }, () => {\r\n      localStorage.setItem('itemsAddedToCart', JSON.stringify(updatedItemsAddedToCart));\r\n    });\r\n  }\r\n\r\n  // получаю из locastorage книги которые добавил в корзину и загружаю их в список при каждом монтировании компонента\r\n  componentDidMount() {\r\n    const itemsAddedToCart = JSON.parse(localStorage.getItem('itemsAddedToCart')) || [];\r\n    this.setState({\r\n      itemsAddedToCart: itemsAddedToCart,\r\n      addedToCart: itemsAddedToCart.length,\r\n    });\r\n  }\r\n\r\n    render () {\r\n\r\n      return (\r\n        <div className='App'>\r\n\r\n          <Header className=\"nav\"addedToCart={this.state.addedToCart}/>\r\n          <Slider slides={this.slides}/>\r\n            <div className='Shop'>\r\n              <Filter\r\n               onCategoryClick={this.handleCategoryClick}\r\n               activeCategory={this.state.activeCategory}\r\n               />\r\n              <Cards\r\n               bookList={this.state.bookList}\r\n               onCardClick={this.addedToCart}\r\n               onPaginationClick={this.PaginationClick}\r\n               activeCategory={this.state.activeCategory}\r\n               />\r\n            </div>\r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}